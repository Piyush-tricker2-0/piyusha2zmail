<!DOCTYPE html>
<html>
<head>
  <title>Temp Mail</title>
</head>
<body>
  <h2>Temp Mail</h2>
  <p>Email: <span id="email"></span></p>
  <ul id="inbox"></ul>

  <script>
    let login, domain;
    async function getMail() {
      const res = await fetch("https://your-render-backend.onrender.com/generate");
      const data = await res.json();
      document.getElementById("email").innerText = data.email;
      login = data.login;
      domain = data.domain;
    }

    async function getInbox() {
      const res = await fetch(`https://your-render-backend.onrender.com/inbox?login=${login}&domain=${domain}`);
      const data = await res.json();
      const inbox = document.getElementById("inbox");
      inbox.innerHTML = "";
      data.forEach(msg => {
        const li = document.createElement("li");
        li.innerText = `${msg.from} - ${msg.subject}`;
        inbox.appendChild(li);
      });
    }

    getMail();
    setInterval(getInbox, 5000);
  </script>
</body>
</html>
